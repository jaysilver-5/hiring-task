(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{630:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(9759)}])},3207:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.8d11abee.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA3klEQVR42g2OPUrEQABGvy+Z/IwBl4wKKhhwSxEsvI1ewT2BlaW1Ft7E9QaeQK22UURWTbFiyGbifM6D173iMZs/nO2Tt4NU/wIiAAuwINs3aUbcz1v4sUZCIUkIREJQlMiy1hyZtL6cTvXedXxcrZDF5qSq2GxUOl8snHnq1xpifexqnG5vAZGvfg1IvN7bVdLkOX68x+FkAmsMnLVwZYEyTdGNfzAfElNAd88v3Inx5zDAkGis1dVyScbJb3jv4qAgESQiQhA38zgJcnZQFDe95DJSowQBLMn2NYSLf0RxXKiWdhEZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},1911:function(e,t,a){"use strict";var l=a(4246),s=a(3132),i=a.n(s);t.Z=()=>(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,l.jsx)(i(),{color:"#00b8b9",loading:!0,size:100,"aria-label":"Loading Spinner","data-testid":"loader"})})},9759:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var l=a(4246),s=a(7378),i=a(885),n=a(6125),r=a(6677),c=a(668);let o=e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}},d=()=>{let e=(0,n.I0)(),t=(0,r.useRouter)(),{token:a,title:l}=(0,n.v9)(e=>e.user),s=async()=>{if(a)try{let t=await fetch("".concat("http://localhost:8000/api/v1","/title"),{method:"GET",headers:{Authorization:a}});if(t.ok){let a=await t.json();e((0,c.Td)(a))}}catch(e){console.error("Error fetching titles:",e)}};return{token:a,titles:l,refreshToken:async()=>{try{let a=await fetch("".concat("http://localhost:8000/api/v1","/auth/refresh-token"),{method:"POST",credentials:"include"});if(a.ok){let t=await a.json();e((0,c.o4)(t.accessToken))}else t.push("/auth/login")}catch(e){console.error("Error refreshing token:",e),t.push("/auth/login")}},fetchTitles:s,tokenIsValid:()=>{let e=o(a),t=Math.floor(Date.now()/1e3);return e&&e.exp>t}}},h=()=>{let e=(0,n.I0)(),{token:t,title:a}=(0,n.v9)(e=>e.user),{tokenIsValid:l,refreshToken:s}=d();return{postTitle:async i=>{if(i&&t)try{l()||await s();let n=await fetch("".concat("http://localhost:8000/api/v1","/title"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:t},body:JSON.stringify({title:i})});if(n.ok){let t=await n.json();e((0,c.Td)([...a,t]))}}catch(e){console.error("Error posting title:",e)}}}};var u=a(1911),x=a(3207);let f=e=>"".concat(e.slice(0,6),"...").concat(e.slice(-4));var p=()=>{let{token:e,titles:t,fetchTitles:a,tokenIsValid:r,refreshToken:c}=d(),{postTitle:o}=h(),[p,g]=(0,s.useState)(""),[m,b]=(0,s.useState)(!0),{walletAddress:w,email:A,username:y}=(0,n.v9)(e=>e.user);(0,s.useEffect)(()=>{(async()=>{r()||await c(),await a(),b(!1)})()},[e]);let N=async e=>{e.preventDefault(),await o(p),g("")};return(0,l.jsxs)("div",{className:"relative flex flex-col min-h-screen bg-back bg-cover bg-no-repeat bg-center w-full overflow-x-hidden",children:[(0,l.jsxs)("nav",{className:"px-32 py-4 flex justify-between items-center fixed top-0 left-0 w-full bg-transparent z-10",children:[(0,l.jsxs)("div",{className:"flex gap-x-2 items-center",children:[(0,l.jsx)("img",{src:x.Z.src,alt:"logo",width:50,height:50,className:"cursor-pointer"}),(0,l.jsx)("h1",{className:"text-4xl font-primary font-extrabold",children:"TITLE"})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center gap-y-2",children:[(0,l.jsx)("button",{className:"btn text-sm font-light",children:f(w)}),(0,l.jsxs)("div",{className:"flex flex-col items-end text-xs text-gray-600",children:[(0,l.jsx)("span",{children:y}),(0,l.jsx)("span",{children:A})]})]})]}),(0,l.jsxs)("div",{className:"pt-28 px-8 w-full flex flex-col items-center flex-grow",children:[(0,l.jsxs)("form",{onSubmit:N,className:"w-full max-w-lg mb-8",children:[(0,l.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"Enter a new title",className:"text-black w-full border border-gray-300 p-3 mb-4 rounded-lg"}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white p-3 rounded-lg",children:"Add Title"})]}),m?(0,l.jsx)("p",{className:"text-gray-500",children:"Loading titles..."}):0===t.length?(0,l.jsx)("p",{className:"text-gray-500",children:"No titles found. Start adding some!"}):(0,l.jsx)("div",{className:"w-full max-w-lg h-96 overflow-y-auto pb-4 custom-scrollbar",children:(0,l.jsx)(i.E.ul,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"space-y-4",children:t.map(e=>"object"==typeof e&&null!==e&&"uuid"in e&&"title"in e&&"createdAt"in e?(0,l.jsxs)("li",{className:"bg-white shadow-lg rounded-lg p-4",children:[(0,l.jsx)("p",{className:"font-bold text-black",children:e.title}),(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleString()})]},e.uuid):null)})})]}),m&&(0,l.jsx)(u.Z,{})]})}}},function(e){e.O(0,[393,888,774,179],function(){return e(e.s=630)}),_N_E=e.O()}]);